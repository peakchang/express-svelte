<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>

    <div style="margin-top:50px">
        <input id="imageFile" type="file">
    </div>

    <div style="margin-top:50px">
        <input type="button" value="Resize Image" onclick="ResizeImage()" />
    </div>


    <div style="margin-top:50px" id="show_img">
    </div>
    <div style="margin-top:50px">
        <img src="" id="output">
    </div>


    <script>
        function ResizeImage() {
            var filesToUpload = document.getElementById('imageFile').files;
            var file = filesToUpload[0];
            console.log(file);
            // 문서내에 img 객체를 생성합니다


            // 파일을 읽을 수 있는 File Reader 를 생성합니다
            var reader = new FileReader();
            // 파일이 읽혀지면 아래 함수가 실행됩니다
            reader.onload = function (e) {
                var img = document.createElement("img");
                img.src = e.target.result;
                console.log(img);
                console.log(img.width);
                console.log(img.height);


                // document.querySelector('#show_img').append(img)


                // // HTML5 canvas 객체를 생성합니다
                // var canvas = document.createElement("canvas");
                // var ctx = canvas.getContext("2d");
                // // 캔버스에 업로드된 이미지를 그려줍니다
                // ctx.drawImage(img, 0, 0);
                // // 최대폭을 400 으로 정했다고 가정했을때
                // // 최대폭을 넘어가는 경우 canvas 크기를 변경해 줍니다.

                // canvas에 변경된 크기의 이미지를 다시 그려줍니다.


                var canvas = document.createElement("canvas");
                canvas.width = 536;
                canvas.height = 609;

                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, 400, 530);
                // canvas 에 있는 이미지를 img 태그로 넣어줍니다
                var dataurl = canvas.toDataURL("image/webp");
                document.getElementById('output').src = dataurl;
            }
            reader.readAsDataURL(file);
        }
    </script>
</body>

</html>